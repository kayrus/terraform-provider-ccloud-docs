<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Terraform by HashiCorp">

    <link rel="apple-touch-icon" sizes="180x180" href="../../../assets/images/favicons/apple-touch-icon-13180a24.png">
    <link rel="icon" type="image/png" href="../../../assets/images/favicons/favicon-32x32-62171ffd.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../assets/images/favicons/favicon-16x16-2821bcc8.png" sizes="16x16">
    <link rel="manifest" href="/android-manifest.json">
    <link rel="mask-icon" href="../../../assets/images/favicons/safari-pinned-tab-bab846e1.svg" color="#5C4EE5">
    <meta name="msapplication-config" content="/microsoft-tile.xml" />
    <meta name="theme-color" content="#ffffff">
    
      <meta name="twitter:card" content="summary" />
      <meta property="og:image" content="/../../../assets/images/og-image-8b3e4f7d.png"/>
      <meta property="og:image:width" content="100"/>
      <meta property="og:image:height" content="100"/>
    <meta name="twitter:site" content="@HashiCorp" />
    <meta name="twitter:creator" content="@HashiCorp" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/docs/enterprise/sentinel/integrate-vcs.html" />
    <meta property="og:title" content="Managing Policies with VCS - Sentinel - Terraform Enterprise - Terraform by HashiCorp" />
    <meta property="og:site_name" content="Terraform by HashiCorp"/>
    <meta property="og:description" content="Terraform by HashiCorp" />

    <title>Managing Policies with VCS - Sentinel - Terraform Enterprise - Terraform by HashiCorp</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://use.typekit.net/wxf7mfi.css">
    <link href="../../../assets/stylesheets/application-06344df3.css" rel="stylesheet" />

    <!-- Site scripts -->
    <!--[if lt IE 9]><script src="../../../assets/javascripts/ie-compat-c141a02d.js" defer="defer"></script><![endif]-->
    <script src="../../../assets/javascripts/application-e080fe63.js" defer="defer"></script>

    <!-- Analytics scrpts -->
    <script defer>
      !function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),e.push(a),e}};for(var t=0;t<e.methods.length;t++){var a=e.methods[t];e[a]=e.factory(a)}e.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},e.SNIPPET_VERSION="4.0.0",e.load("")}}();var om597a24292a958,om597a24292a958_poll=function(){var e=0;return function(t,a){clearInterval(e),e=setInterval(t,a)}}();!function(e,t,a){if(e.getElementById(a))om597a24292a958_poll(function(){if(window.om_loaded&&!om597a24292a958)return(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0})},25);else{var n=!1,o=e.createElement("script");o.id=a,o.src="//a.optnmstr.com/app/js/api.min.js",o.async=!0,o.onload=o.onreadystatechange=function(){if(!(n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState))try{n=om_loaded=!0,(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0}),o.onload=o.onreadystatechange=null}catch(e){}},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(o)}}(document,0,"omapi-script");
    </script>

    
  </head>

  <body id="page-docs-enterprise2-sentinel-integrate-vcs" class="layout-enterprise2 page-managing-policies-with-vcs-sentinel-terraform-enterprise">

    <svg class="hidden-print" aria-hidden="true" style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <symbol id="mega-nav-icon-angle" viewBox="0 0 13 7">
      <polygon points="6.5,6.5 0.7,1.6 1.3,0.8 6.5,5.2 11.7,0.8 12.3,1.6 "/>
    </symbol>
    <symbol id="mega-nav-icon-close" viewBox="0 0 13 15">
      <path vector-effect="non-scaling-stroke" d="M1.1 14L11.9 1M11.9 14L1.1 1"/>
    </symbol>
  </defs>
</svg>
<div class="hidden-print mega-nav-sandbox">
  <div class="mega-nav-banner">
    <div class="container">
      <div class="mega-nav-banner-item">
        <a class="mega-nav-banner-logo" href="https://www.hashicorp.com"><img src="../../../assets/images/mega-nav/logo-hashicorp-wordmark-bbed0e8a.svg" alt="HashiCorp Logo" /></a>
      </div>
      <div class="mega-nav-banner-item">
        <p class="mega-nav-tagline"><span class="visible-xs text-muted">Learn the</span><span class="hidden-xs text-muted">Learn how Terraform fits into the</span></p>
        <div id="#mega-nav" class="mega-nav">
          <button type="button" id="mega-nav-ctrl" class="mega-nav-ctrl">
            <div class="mega-nav-ctrl-items">
              <img src="../../../assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" />
              <strong>HashiCorp Suite</strong>
              <span class="mega-nav-icon-outline">
                <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg><span class="visuallyhidden">Open</span>
              </span>
            </div>
          </button>
          <div id="mega-nav-body-ct" class="mega-nav-body-ct" aria-labelledby="mega-nav-ctrl">
            <div class="mega-nav-body">
              <button type="button" id="mega-nav-close" class="mega-nav-close"><svg class="mega-nav-icon mega-nav-icon-close" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-close"></use></svg><span class="visuallyhidden">Close</span></button>
              <div class="mega-nav-body-header">
                <div class="mega-nav-body-header-item">
                  <h2 class="mega-nav-h1">Provision, Secure, Connect, and&nbsp;Run</h2>
                  <p class="mega-nav-h2">Any infrastructure for any&nbsp;application</p>
                </div>
                <div class="mega-nav-body-header-item">
                  <a href="https://www.hashicorp.com/" class="mega-nav-btn"><img src="../../../assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" /> Learn the HashiCorp Enterprise&nbsp;Suite <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg></a>
                </div>
              </div>
              <div class="mega-nav-body-grid">
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Provision</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vagrantup.com" class="mega-nav-grid-item mega-nav-grid-item-vagrant">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-vagrant-a7ab5898.svg" alt="Vagrant Logo" />
                        </div>
                        <b>Vagrant</b>
                        <ul>
                          <li><span class="mega-nav-tag">Build</span></li>
                          <li><span class="mega-nav-tag">Test</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.packer.io" class="mega-nav-grid-item mega-nav-grid-item-packer">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-packer-cb3b9b94.svg" alt="Packer Logo" />
                        </div>
                        <b>Packer</b>
                        <ul>
                          <li><span class="mega-nav-tag">Package</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.terraform.io" class="mega-nav-grid-item mega-nav-grid-item-terraform">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-terraform-ff69eaae.svg" alt="Terraform Logo" />
                        </div>
                        <b>Terraform</b>
                        <ul>
                          <li><span class="mega-nav-tag">Provision</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Secure</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vaultproject.io" class="mega-nav-grid-item mega-nav-grid-item-vault">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-vault-0f83e3d2.svg" alt="Vault Logo" />
                        </div>
                        <b>Vault</b>
                        <ul>
                          <li><span class="mega-nav-tag">Secure</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Connect</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.consul.io" class="mega-nav-grid-item mega-nav-grid-item-consul">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-consul-c77f6844.svg" alt="Consul Logo" />
                        </div>
                        <b>Consul</b>
                        <ul>
                          <li><span class="mega-nav-tag">Connect</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Run</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.nomadproject.io" class="mega-nav-grid-item mega-nav-grid-item-nomad">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-nomad-c4c148be.svg" alt="Nomad Logo" />
                        </div>
                        <b>Nomad</b>
                        <ul>
                          <li><span class="mega-nav-tag">Run</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="mega-nav-body-footer">
                <p>Seven elements of the modern Application Lifecycle</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


    <div id="header" class="navigation navbar-static-top hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <div class="navbar-header">
              <div class="navbar-brand">
                <a href="/">
                  <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="50">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

                </a>
              </div>
              <button class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="buttons hidden-xs">
              <nav class="navigation-links" role="navigation">
                <ul class="main-links nav navbar-nav navbar-right">
                  <li><a href="/intro/index.html">Intro</a></li>
                  <li><a href="https://learn.hashicorp.com/terraform/">Learn</a></li>
                  <li><a href="/docs/index.html">Docs</a></li>
                  <li><a href="/guides/index.html">Guides</a></li>
                  <li><a href="/docs/extend/index.html">Extend</a></li>
                  <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
                  <li>
                    <a href="/downloads.html">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
                    </a>
                  </li>
                  <li>
                    <a href="https://github.com/hashicorp/terraform">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sidebar-overlay"></div>

<aside class="sidebar" role="navigation">
  <div class="sidebar-header">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="42">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

  </div>

  <ul class="nav sidebar-nav">
    <li><a href="/intro/index.html">Intro</a></li>
    <li><a href="https://learn.hashicorp.com/terraform/">Learn</a></li>
    <li><a href="/docs/index.html">Docs</a></li>
    <li><a href="/guides/index.html">Guides</a></li>
    <li><a href="/docs/extend/index.html">Extend</a></li>
    <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
  </ul>

  <div class="divider"></div>

  <ul class="external nav sidebar-nav">
    <li>
      <a href="/downloads.html">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
      </a>
    </li>
    <li>
      <a href="https://github.com/hashicorp/terraform">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
      </a>
    </li>
  </ul>
</aside>


    <div class="container">
  <div class="row">
    <div id="docs-sidebar" class="col-sm-4 col-md-3 col-xs-12 hidden-print" role="complementary">
          <h4><a href="/docs/enterprise/index.html">Terraform Enterprise</a></h4>

    <ul class="nav docs-sidenav">
      <li>
        <a href="/docs/enterprise/getting-started/index.html">Getting Started</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/getting-started/access.html">Accessing TFE</a>
          </li>
          <li>
            <a href="/docs/enterprise/getting-started/vcs.html">Configuring VCS Access</a>
          </li>
          <li>
            <a href="/docs/enterprise/getting-started/workspaces.html">Creating Workspaces</a>
          </li>
          <li>
            <a href="/docs/enterprise/getting-started/runs.html">Running Terraform</a>
          </li>
          <li>
            <a href="/docs/enterprise/getting-started/policies.html">Creating Policies</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/enterprise/migrate/index.html">Migrating from Open Source</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/migrate/workspaces.html">Migrating Multiple Workspaces</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/enterprise/upgrade/index.html">Upgrading</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/upgrade/batch.html">Batch migration</a>
          </li>
          <li>
            <a href="/docs/enterprise/upgrade/differences.html">Current vs. Legacy</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/enterprise/vcs/index.html">VCS Integration</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/vcs/github.html">Github</a>
          </li>
          <li>
            <a href="/docs/enterprise/vcs/github-enterprise.html">Github Enterprise</a>
          </li>
          <li>
            <a href="/docs/enterprise/vcs/gitlab-com.html">GitLab.com</a>
          </li>
          <li>
            <a href="/docs/enterprise/vcs/gitlab-eece.html">GitLab EE and CE</a>
          </li>
          <li>
            <a href="/docs/enterprise/vcs/bitbucket-cloud.html">Bitbucket Cloud</a>
          </li>
          <li>
            <a href="/docs/enterprise/vcs/bitbucket-server.html">Bitbucket Server</a>
          </li>
          <li>
            <a href="/docs/enterprise/vcs/troubleshooting.html">Troubleshooting</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/enterprise/workspaces/index.html">Workspaces</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/workspaces/naming.html">Naming</a>
          </li>
          <li>
            <a href="/docs/enterprise/workspaces/creating.html">Creating Workspaces</a>
          </li>
          <li>
            <a href="/docs/enterprise/workspaces/access.html">Managing Access</a>
          </li>
          <li>
            <a href="/docs/enterprise/workspaces/repo-structure.html">Repo Structure</a>
          </li>
          <li>
            <a href="/docs/enterprise/workspaces/settings.html">Settings</a>
          </li>
          <li>
            <a href="/docs/enterprise/workspaces/notifications.html">Notifications</a>
          </li>
          <li>
            <a href="/docs/enterprise/workspaces/variables.html">Variables</a>
          </li>
          <li>
            <a href="/docs/enterprise/workspaces/ssh-keys.html">SSH Keys for Modules</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/enterprise/run/index.html">Terraform Runs</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/run/states.html">Run States and Stages</a>
          </li>
          <li>
            <a href="/docs/enterprise/run/ui.html">UI/VCS-driven Runs</a>
          </li>
          <li>
            <a href="/docs/enterprise/run/api.html">API-driven Runs</a>
          </li>
          <li>
            <a href="/docs/enterprise/run/cli.html">CLI-driven Runs</a>
          </li>
          <li>
            <a href="/docs/enterprise/run/install-software.html">Installing Software</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/enterprise/registry/index.html">Private Module Registry</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/registry/using.html">Using Private Modules</a>
          </li>
          <li>
            <a href="/docs/enterprise/registry/publish.html">Publishing Private Modules</a>
          </li>
          <li>
            <a href="/docs/enterprise/registry/design.html">Configuration Designer</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/enterprise/users-teams-organizations/index.html">Users, Teams, Organizations</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/users-teams-organizations/users.html">Users</a>
          </li>
          <li>
            <a href="/docs/enterprise/users-teams-organizations/teams.html">Teams</a>
          </li>
          <li>
            <a href="/docs/enterprise/users-teams-organizations/organizations.html">Organizations</a>
          </li>
          <li>
            <a href="/docs/enterprise/users-teams-organizations/permissions.html">Permissions</a>
          </li>
          <li>
          <a href="/docs/enterprise/users-teams-organizations/2fa.html">Two-factor Authentication</a>
        </li>
          <li>
            <a href="/docs/enterprise/users-teams-organizations/service-accounts.html">Service Accounts</a>
          </li>
        </ul>
      </li>

      <li class="active">
        <a href="/docs/enterprise/sentinel/index.html">Sentinel</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/sentinel/manage-policies.html">Manage Policies</a>
          </li>
          <li class="active">
            <a href="/docs/enterprise/sentinel/integrate-vcs.html">Manage Policies with VCS</a>
          </li>
          <li>
            <a href="/docs/enterprise/sentinel/enforce.html">Enforce and Override Policies</a>
          </li>
          <li>
            <a href="/docs/enterprise/sentinel/import/index.html">Defining Policies</a>
            <ul class="nav">
              <li>
                <a href="/docs/enterprise/sentinel/import/tfplan.html">import: tfplan</a>
                <ul class="nav">
                  <li>
                    <a href="/docs/enterprise/sentinel/import/mock-tfplan.html">Mocking tfplan Data</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="/docs/enterprise/sentinel/import/tfconfig.html">import: tfconfig</a>
                <ul class="nav">
                  <li>
                    <a href="/docs/enterprise/sentinel/import/mock-tfconfig.html">Mocking tfconfig Data</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="/docs/enterprise/sentinel/import/tfstate.html">import: tfstate</a>
                <ul class="nav">
                  <li>
                    <a href="/docs/enterprise/sentinel/import/mock-tfstate.html">Mocking tfstate Data</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="/docs/enterprise/sentinel/examples.html">Example Policies</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/enterprise/api/index.html">API</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/api/account.html">Account</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/applies.html">Applies</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/configuration-versions.html">Configuration Versions</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/notification-configurations.html">Notification Configurations</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/oauth-clients.html">OAuth Clients</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/oauth-tokens.html">OAuth Tokens</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/organizations.html">Organizations</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/organization-tokens.html">Organization Tokens</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/plans.html">Plans</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/policies.html">Policies</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/policy-checks.html">Policy Checks</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/policy-sets.html">Policy Sets</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/modules.html">Registry Modules</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/run.html">Runs</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/ssh-keys.html">SSH Keys</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/state-versions.html">State Versions</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/team-access.html">Team Access</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/team-members.html">Team Membership</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/team-tokens.html">Team Tokens</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/teams.html">Teams</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/user-tokens.html">User Tokens</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/users.html">Users</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/variables.html">Variables</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/workspaces.html">Workspaces</a>
          </li>
          <li>
            <a href="/docs/enterprise/api/admin/index.html">Admin</a>
            <ul class="nav">
              <li>
                <a href="/docs/enterprise/api/admin/organizations.html">Organizations</a>
              </li>
              <li>
                <a href="/docs/enterprise/api/admin/runs.html">Runs</a>
              </li>
              <li>
                <a href="/docs/enterprise/api/admin/settings.html">Settings</a>
              </li>
              <li>
                <a href="/docs/enterprise/api/admin/terraform-versions.html">Terraform Versions</a>
              </li>
              <li>
                <a href="/docs/enterprise/api/admin/users.html">Users</a>
              </li>
              <li>
                <a href="/docs/enterprise/api/admin/workspaces.html">Workspaces</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>

      <hr>

      <li>
        <a href="/docs/enterprise/private/index.html">Private Terraform Enterprise</a>
        <ul class="nav">
          <li>
            <a href="/docs/enterprise/private/reference-architecture-installer.html">Reference Architecture (Installer)</a>
            <ul class="nav">
              <li>
                <a href="/docs/enterprise/private/aws-setup-guide.html">AWS Reference Architecture</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/azure-setup-guide.html">Azure Reference Architecture</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/gcp-setup-guide.html">GCP Reference Architecture</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/vmware-setup-guide.html">VMware Reference Architecture</a>
              </li>
            </ul>
          <li>
            <a href="/docs/enterprise/private/install-installer.html">Installation (Installer)</a>
            <ul class="nav">
              <li>
                <a href="/docs/enterprise/private/preflight-installer.html">Installer Preflight</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/install-installer.html">Installation</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/migrate.html">Migrate from AMI</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/rhel-install-guide.html">RedHat Enterprise Linux Install Guide</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/centos-install-guide.html">CentOS Linux Install Guide</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/minio-setup-guide.html">Minio Setup Guide</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/automating-the-installer.html">Automated Installation</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/automating-initial-user.html">Initial Admin Automation </a>
              </li>
              <li>
                <a href="/docs/enterprise/private/upgrades.html">Upgrades</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/vault.html">External Vault</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/automated-recovery.html">Automated Recovery</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/capacity.html">Capacity &amp; Performance</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/docs/enterprise/private/install-ami.html">Installation (AMI)</a>
          </li>
          <li>
            <a href="/docs/enterprise/private/config.html">Configuration</a>
          </li>
          <li>
            <a href="/docs/enterprise/private/admin/index.html">Administration</a>
            <ul class="nav">
              <li>
                <a href="/docs/enterprise/private/admin/general.html">General Settings</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/admin/integration.html">Integration Settings</a>
              </li>
              <li>
                <a href="/docs/enterprise/private/admin/resources.html">Managing Accounts &amp; Resources</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/docs/enterprise/saml/index.html">SAML SSO</a>
            <ul class="nav">
              <li>
                <a href="/docs/enterprise/saml/configuration.html">Configuration</a>
              </li>
              <li>
                <a href="/docs/enterprise/saml/team-membership.html">Team Membership</a>
              </li>
              <li>
                <a href="/docs/enterprise/saml/attributes.html">Attributes</a>
              </li>
              <li>
                <a href="/docs/enterprise/saml/login.html">Login</a>
              </li>
              <li>
                <a href="/docs/enterprise/saml/identity-provider-configuration.html">Identity Provider Configuration</a>
                <ul class="nav">
                  <li>
                    <a href="/docs/enterprise/saml/identity-provider-configuration-adfs.html">ADFS</a>
                  </li>
                  <li>
                    <a href="/docs/enterprise/saml/identity-provider-configuration-aad.html">Azure Active Directory</a>
                  </li>
                  <li>
                    <a href="/docs/enterprise/saml/identity-provider-configuration-okta.html">Okta</a>
                  </li>
                  <li>
                    <a href="/docs/enterprise/saml/identity-provider-configuration-onelogin.html">OneLogin</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="/docs/enterprise/saml/troubleshooting.html">Troubleshooting</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/docs/enterprise/private/reliability-availability.html">Reliability &amp; Availability</a>
          </li>
          <li>
            <a href="/docs/enterprise/private/data-security.html">Data Security</a>
          </li>
          <li>
            <a href="/docs/enterprise/private/logging.html">Logging</a>
          </li>
          <li>
            <a href="/docs/enterprise/private/monitoring.html">Monitoring</a>
          </li>
          <li>
            <a href="/docs/enterprise/private/diagnostics.html">Diagnostics</a>
          </li>
          <li>
            <a href="/docs/enterprise/private/faq.html">FAQs</a>
          </li>
        </ul>
      </li>

      <hr>

      <li>
        <a class="back" href="/docs/enterprise-legacy/index.html">Terraform Enterprise (legacy)</a>
      </li>
    </ul>

        <h4>Other Docs</h4>

    <ul class="nav docs-sidenav">
      <li>
        <a class="back" href="/docs/cli-index.html">Terraform CLI</a>
      </li>
      <li>
        <a class="back" href="/docs/providers/index.html">Provider References</a>
      </li>
      <li>
        <a class="back" href="/docs/glossary.html">Terraform Glossary</a>
      </li>
      <li>
        <a class="back" href="/intro/index.html">Introduction to Terraform</a>
      </li>
      <li>
        <a class="back" href="/guides/index.html">Guides and Whitepapers</a>
      </li>
      <li>
        <a class="back" href="/docs/registry/index.html">Terraform Registry</a>
      </li>
      <li>
        <a class="back" href="/docs/github-actions/index.html">Terraform GitHub Actions</a>
      </li>
      <li>
        <a class="back" href="/docs/extend/index.html">Extending Terraform</a>
      </li>
    </ul>



    </div>

    <div id="inner" class="col-sm-8 col-md-9 col-xs-12" role="main">
      
  <h1 id="managing-sentinel-policies-with-version-control">
  <a name="managing-sentinel-policies-with-version-control" class="anchor" href="#managing-sentinel-policies-with-version-control">&raquo;</a>
  Managing Sentinel Policies with Version Control
</h1>
<p>Terraform Enterprise (TFE)&#39;s <a href="/docs/enterprise/sentinel/manage-policies.html">UI for managing Sentinel policies</a> is designed primarily for <em>viewing</em> your organization&#39;s policies and policy sets. It also works well for demos and other simple use cases.</p>
<p>For complex day-to-day use, we recommend keeping Sentinel code in version control and using Terraform to automatically deploy your policies. This approach is a better fit with Sentinel&#39;s policy-as-code design, and scales better for organizations with multiple owners and administrators.</p>
<p>This page describes an end-to-end process for managing TFE&#39;s Sentinel policies with version control and Terraform. Use this outline and the <a href="https://github.com/hashicorp/tfe-policies-example/">example repository</a> as a starting point for managing your own organization&#39;s policies.</p>
<h2 id="summary">
  <a name="summary" class="anchor" href="#summary">&raquo;</a>
  Summary
</h2>
<p>Managing policies with version control and Terraform requires the following steps:</p>

<ul>
<li>Create a VCS repository for policies.
</li>
<li>Write Sentinel policies and add them to the policy repo.
</li>
<li>Write a Terraform configuration for managing policies in TFE, and add it to the policy repo. This configuration must:

<ul>
<li>Configure <a href="/docs/providers/tfe/index.html">the <code>tfe</code> provider</a>.
</li>
<li>Manage individual policies with <code>tfe_sentinel_policy</code> resources.
</li>
<li>Manage policy sets with <code>tfe_policy_set</code> resources.
</li>
</ul>
</li>
<li>Create a TFE workspace linked to the policy repo.
</li>
<li>Write tests for your Sentinel policies.
</li>
<li>Use CI to run Sentinel tests automatically.
</li>
</ul>
<h2 id="repository-structure">
  <a name="repository-structure" class="anchor" href="#repository-structure">&raquo;</a>
  Repository Structure
</h2>
<div class="alert alert-info" role="alert">
<p><strong>Example:</strong> We&#39;ve provided a complete and working <a href="https://github.com/hashicorp/tfe-policies-example/">example policy repo</a>, which you can use as a template for your own policy repo.</p>
</div>
<p>Create a single VCS repository for managing your organization&#39;s Sentinel policies. We recommend a short and descriptive name like &quot;tfe-policies&quot;. Later, you will create a TFE workspace based on this repo.</p>
<p>Once the policy management process is fully implemented, the repo will contain the following:</p>

<ul>
<li><strong>Sentinel policies</strong> stored as <code>.sentinel</code> files in the root of the repo.
</li>
<li><strong>A Terraform configuration</strong> stored in the root of the repo. This can be a single <code>main.tf</code> file, or several smaller configuration files.
</li>
<li><strong>Sentinel tests</strong> stored in a <code>test/</code> directory.
</li>
<li>Optionally: other information or metadata, which might include a README file, editor configurations, and CI configurations.
</li>
</ul>
<div class="alert alert-warning" role="alert">
<p><strong>Important:</strong> When managing policies with Terraform, the security of your policy repo determines the security of your policies. You should strictly control merge access to this repo, prohibit direct pushes to master, and enforce a consistent process for reviewing and merging changes to policy code.</p>
</div>
<h2 id="sentinel-policies">
  <a name="sentinel-policies" class="anchor" href="#sentinel-policies">&raquo;</a>
  Sentinel Policies
</h2>
<div class="alert alert-info" role="alert">
<p><strong>Example:</strong> See the <code>.sentinel</code> files included in the <a href="https://github.com/hashicorp/tfe-policies-example/">example policy repo</a>, or browse the <a href="/docs/enterprise/sentinel/examples.html">list of example policies</a>.</p>
</div>
<p>Write some <a href="/docs/enterprise/sentinel/import/index.html">Sentinel policies for TFE</a>, and commit them to your repo as <code>.sentinel</code> files. If you&#39;re already enforcing Sentinel policies in TFE, copy them into the new repo.</p>
<div class="alert alert-info" role="alert">
<p><strong>Note:</strong> Since your Terraform configuration for policies will be using <a href="/docs/providers/tfe/index.html">the <code>tfe</code> provider</a> with very elevated permissions, you might want to use a Sentinel policy to restrict which <code>tfe</code> resources the workspace can manage. The example policy repo <a href="https://github.com/hashicorp/tfe-policies-example/blob/master/tfe_policies_only.sentinel">includes a policy</a> that only allows <code>tfe_sentinel_policy</code> and <code>tfe_policy_set</code> resources in the policy workspace.</p>
</div>
<h2 id="terraform-configuration">
  <a name="terraform-configuration" class="anchor" href="#terraform-configuration">&raquo;</a>
  Terraform Configuration
</h2>
<p>Next, write a Terraform configuration to manage your policies and policy sets in TFE using <a href="/docs/providers/tfe/index.html">the <code>tfe</code> provider</a>.</p>
<div class="alert alert-info" role="alert">
<p><strong>Example:</strong> The example policy repo includes a <a href="https://github.com/hashicorp/tfe-policies-example/blob/master/main.tf">complete Terraform configuration for policies</a>, with comments for clarity. If you prefer to read the Terraform code without a guided walkthrough, you can <a href="#tfe-workspace">skip to the next section</a>.</p>
</div>
<h3 id="define-variables-for-accessing-tfe">
  <a name="define-variables-for-accessing-tfe" class="anchor" href="#define-variables-for-accessing-tfe">&raquo;</a>
  Define Variables for Accessing TFE
</h3>
<p>The <code>tfe</code> provider needs a highly privileged Terraform Enterprise API token in order to manage policies. The best way to handle this type of secret is with a sensitive variable in a TFE workspace. To enable this, define a variable in the configuration.</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">variable</span> <span class="s2">"tfe_token"</span> <span class="p">{}</span>
</code></pre></div><p>If you use a private install of TFE or multiple TFE organizations (or if you might do so in the future), you can set your TFE hostname and TFE organization as variables:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">variable</span> <span class="s2">"tfe_hostname"</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"The domain where your TFE is hosted."</span>
  <span class="n">default</span>     <span class="o">=</span> <span class="s2">"app.terraform.io"</span>
<span class="p">}</span>

<span class="n">variable</span> <span class="s2">"tfe_organization"</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"The TFE organization to apply your changes to."</span>
  <span class="n">default</span>     <span class="o">=</span> <span class="s2">"example_corp"</span>
<span class="p">}</span>
</code></pre></div><h3 id="configure-the-tfe-provider">
  <a name="configure-the-tfe-provider" class="anchor" href="#configure-the-tfe-provider">&raquo;</a>
  Configure the <code>tfe</code> Provider
</h3>
<p>Configure the <code>tfe</code> provider (version 0.3 or higher) with your API token and hostname variables.</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">provider</span> <span class="s2">"tfe"</span> <span class="p">{</span>
  <span class="n">hostname</span> <span class="o">=</span> <span class="s2">"${var.tfe_hostname}"</span>
  <span class="n">token</span>    <span class="o">=</span> <span class="s2">"${var.tfe_token}"</span>
  <span class="n">version</span>  <span class="o">=</span> <span class="s2">"~&gt; 0.6"</span>
<span class="p">}</span>
</code></pre></div><h3 id="optional-use-a-data-source-to-get-workspace-ids">
  <a name="optional-use-a-data-source-to-get-workspace-ids" class="anchor" href="#optional-use-a-data-source-to-get-workspace-ids">&raquo;</a>
  Optional: Use a Data Source to Get Workspace IDs
</h3>
<p>The <code>tfe_policy_set</code> resource uses workspace IDs, which can be found on a workspace&#39;s <a href="/docs/enterprise/workspaces/settings.html#id">settings page</a>. There are several ways to work with these IDs in your configuration, all of which have advantages and disadvantages:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead><tbody>
<tr>
<td>Use literal ID strings.</td>
<td>Highly secure, since workspace IDs never change.</td>
<td>Policy set configs are opaque. Accidental misconfigurations are difficult to spot.</td>
</tr>
<tr>
<td>Use a data source to look up IDs by name.</td>
<td>Convenient and easy to read.</td>
<td>Renaming a workspace (requires admin permissions) can remove it from a policy set.</td>
</tr>
<tr>
<td>Use a variable to map workspace names to IDs.</td>
<td>Secure and easy to read.</td>
<td>Keeping the variable up-to-date is inconvenient.</td>
</tr>
<tr>
<td>Use <code>external_id</code> attribute of <code>tfe_workspace</code> resources.</td>
<td>Secure, readable, automatically updated.</td>
<td>Only available if you already manage your TFE workspaces with the <code>tfe</code> Terraform provider.</td>
</tr>
</tbody></table>
<p>In our examples, we want to clearly show what our policy sets are doing, which is much easier if we can refer to workspaces by name. The <a href="/docs/providers/tfe/d/workspace_ids.html"><code>tfe_workspace_ids</code> data source</a> (in <code>tfe</code> provider versions ≥ 0.6) makes it easy to use workspace names:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">data</span> <span class="s2">"tfe_workspace_ids"</span> <span class="s2">"all"</span> <span class="p">{</span>
  <span class="n">names</span>        <span class="o">=</span> <span class="p">[</span><span class="s2">"*"</span><span class="p">]</span>
  <span class="n">organization</span> <span class="o">=</span> <span class="s2">"${var.tfe_organization}"</span>
<span class="p">}</span>

<span class="n">locals</span> <span class="p">{</span>
  <span class="c1"># Use a shorter name for this map in policy set resources:</span>
  <span class="n">workspaces</span> <span class="o">=</span> <span class="s2">"${data.tfe_workspace_ids.all.external_ids}"</span>
<span class="p">}</span>
</code></pre></div><div class="alert alert-warning" role="alert">
<p><strong>Important:</strong> Before using this approach in your organization, make sure you understand the security and usability trade-offs.</p>
</div>
<h3 id="create-policy-resources">
  <a name="create-policy-resources" class="anchor" href="#create-policy-resources">&raquo;</a>
  Create Policy Resources
</h3>
<p>Create a <a href="/docs/providers/tfe/r/sentinel_policy.html"><code>tfe_sentinel_policy</code> resource</a> for each Sentinel policy in the repo.</p>

<ul>
<li>Set the resource name and the <code>name</code> attribute to the policy&#39;s filename, minus the <code>.sentinel</code> extension.
</li>
<li>Use the <code>file()</code> function to pull the policy contents into the <code>policy</code> attribute.
</li>
</ul>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"tfe_sentinel_policy"</span> <span class="s2">"aws-block-allow-all-cidr"</span> <span class="p">{</span>
  <span class="nb">name</span>         <span class="o">=</span> <span class="s2">"aws-block-allow-all-cidr"</span>
  <span class="n">description</span>  <span class="o">=</span> <span class="s2">"Avoid nasty firewall mistakes (AWS version)"</span>
  <span class="n">organization</span> <span class="o">=</span> <span class="s2">"${var.tfe_organization}"</span>
  <span class="n">policy</span>       <span class="o">=</span> <span class="s2">"${file("</span><span class="p">.</span><span class="nf">/</span><span class="n">aws</span><span class="o">-</span><span class="n">block</span><span class="o">-</span><span class="n">allow</span><span class="o">-</span><span class="n">all</span><span class="o">-</span><span class="n">cidr</span><span class="p">.</span><span class="nf">sentinel</span><span class="s2">")}"</span>
  <span class="n">enforce_mode</span> <span class="o">=</span> <span class="s2">"hard-mandatory"</span>
<span class="p">}</span>
</code></pre></div><h3 id="create-policy-set-resources">
  <a name="create-policy-set-resources" class="anchor" href="#create-policy-set-resources">&raquo;</a>
  Create Policy Set Resources
</h3>
<div class="alert alert-info" role="alert">
<p><strong>Note:</strong> See <a href="/docs/enterprise/sentinel/manage-policies.html">Managing Sentinel Policies</a> for a complete description of TFE&#39;s policy sets.</p>
</div>
<p>Create a <a href="/docs/providers/tfe/r/policy_set.html"><code>tfe_policy_set</code> resource</a> for each policy set you wish to create.</p>

<ul>
<li>Use the <code>policy_ids</code> list to specify which policies to include. Reference the <code>id</code> attributes from your policy resources, like <code>&quot;${tfe_sentinel_policy.aws-block-allow-all-cidr.id}&quot;</code>.
</li>
<li><p>Set a value for either <code>global</code> or <code>workspace_external_ids</code>, to specify which workspaces these policies should be enforced on.</p>
<div class="alert alert-info" role="alert">
<p><strong>Note:</strong> In our examples, we use a data source to reference workspace IDs by name. Your configuration might handle workspace IDs differently; see the <a href="#optional-use-a-data-source-to-get-workspace-ids">section about workspace IDs</a> above for more info.</p>
</div>
</li>
</ul>
<div class="highlight"><pre class="highlight hcl"><code><span class="c1"># A global policy set</span>
<span class="n">resource</span> <span class="s2">"tfe_policy_set"</span> <span class="s2">"global"</span> <span class="p">{</span>
  <span class="nb">name</span>         <span class="o">=</span> <span class="s2">"global"</span>
  <span class="n">description</span>  <span class="o">=</span> <span class="s2">"Policies that should be enforced on ALL infrastructure."</span>
  <span class="n">organization</span> <span class="o">=</span> <span class="s2">"${var.tfe_organization}"</span>
  <span class="n">global</span>       <span class="o">=</span> <span class="kp">true</span>

  <span class="n">policy_ids</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"${tfe_sentinel_policy.aws-restrict-instance-type-default.id}"</span><span class="p">,</span>
  <span class="p">]</span>
<span class="p">}</span>

<span class="c1"># A non-global policy set</span>
<span class="n">resource</span> <span class="s2">"tfe_policy_set"</span> <span class="s2">"production"</span> <span class="p">{</span>
  <span class="nb">name</span>         <span class="o">=</span> <span class="s2">"production"</span>
  <span class="n">description</span>  <span class="o">=</span> <span class="s2">"Policies that should be enforced on production infrastructure."</span>
  <span class="n">organization</span> <span class="o">=</span> <span class="s2">"${var.tfe_organization}"</span>

  <span class="n">policy_ids</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"${tfe_sentinel_policy.aws-restrict-instance-type-prod.id}"</span><span class="p">,</span>
  <span class="p">]</span>

  <span class="n">workspace_external_ids</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"${local.workspaces["</span><span class="n">app</span><span class="o">-</span><span class="n">prod</span><span class="s2">"]}"</span><span class="p">,</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div><h3 id="importing-resources">
  <a name="importing-resources" class="anchor" href="#importing-resources">&raquo;</a>
  Importing Resources
</h3>
<p>If your TFE organization already has some policies or policy sets, make sure to include them when writing your Terraform configuration.</p>
<p>To bring the old resources under management, you can either delete them and let Terraform re-create them, or <a href="/docs/import/index.html">import them into the Terraform state</a>.</p>
<p>To import existing resources into your TFE workspace, you must configure <a href="/docs/backends/types/terraform-enterprise.html">the <code>atlas</code> backend</a> and run <code>terraform import</code> on your local workstation. Be sure to import resources <strong>after</strong> you have created a TFE workspace for managing policies, but <strong>before</strong> you have performed any runs in that workspace.</p>
<p>For the specific import syntax to use, see the documentation for <a href="/docs/providers/tfe/r/sentinel_policy.html">the <code>tfe_sentinel_policy</code> resource</a> and <a href="/docs/providers/tfe/r/policy_set.html">the <code>tfe_policy_set</code> resource</a>. You can find policy and policy set IDs in the URL bar when viewing them in TFE.</p>
<div class="alert alert-warning" role="alert">
<p><strong>Important:</strong> <a href="/docs/backends/types/remote.html">The <code>remote</code> backend</a> does not currently support the <code>terraform import</code> command. If you plan to import, configure <a href="/docs/backends/types/terraform-enterprise.html">the <code>atlas</code> backend</a> instead.</p>
</div>
<h2 id="tfe-workspace">
  <a name="tfe-workspace" class="anchor" href="#tfe-workspace">&raquo;</a>
  TFE Workspace
</h2>
<p>Create a <a href="/docs/enterprise/workspaces/creating.html">new TFE workspace</a> linked to to your policy management repo.</p>
<div class="alert alert-info" role="alert">
<p><strong>Note:</strong> This workspace doesn&#39;t have to belong to the organization whose policies it manages. If you use multiple TFE organizations, one of them can manage policies for the others.</p>
</div>
<p>Before performing any runs, go to the workspace&#39;s &quot;Variables&quot; page and set the following Terraform variables (using whichever names you used in the configuration):</p>

<ul>
<li><a name="tfe_token" /><a href="#tfe_token"><code>tfe_token</code></a> (mark as &quot;Sensitive&quot;) — A TFE API token that can manage your organization&#39;s Sentinel policies. This token must be one of the following:

<ul>
<li>The <a href="/docs/enterprise/users-teams-organizations/service-accounts.html#organization-service-accounts">organization token</a> (recommended)
</li>
<li>The <a href="/docs/enterprise/users-teams-organizations/service-accounts.html#team-service-accounts">team token</a> for the <a href="/docs/enterprise/users-teams-organizations/teams.html#the-owners-team">owners team</a>
</li>
<li>A <a href="/docs/enterprise/users-teams-organizations/users.html#api-tokens">user token</a> from a member of the owners team
</li>
</ul>
</li>
<li><a name="tfe_organization" /><a href="#tfe_organization"><code>tfe_organization</code></a> — The name of the organization you want to manage policies for.
</li>
<li><a name="tfe_hostname" /><a href="#tfe_hostname"><code>tfe_hostname</code></a> — The hostname of your TFE instance.
</li>
</ul>
<p>Once the variables are configured, you can queue a Terraform run to begin managing policies.</p>
<h2 id="policy-tests">
  <a name="policy-tests" class="anchor" href="#policy-tests">&raquo;</a>
  Policy Tests
</h2>
<p>It&#39;s easier and safer to collaborate on policy as code when your code is well-tested. Take advantage of Sentinel&#39;s built-in testing capabilities by adding tests to your policy repo.</p>
<div class="alert alert-info" role="alert">
<p><strong>Example:</strong> The example policy repo includes <a href="https://github.com/hashicorp/tfe-policies-example/tree/master/test/">tests for every policy</a>.</p>
</div>
<p>See the <a href="https://docs.hashicorp.com/sentinel/writing/testing">Sentinel testing documentation</a> to learn how to write and run tests. In brief, you should:</p>

<ul>
<li>Create a <code>test/&lt;NAME&gt;</code> directory for each policy file.
</li>
<li><p>Add JSON files (one per test case) to those directories. The object in each file should include the following keys:</p>

<ul>
<li><p><a name="mock" /><a href="#mock"><code>mock</code></a> — Mock data that represents the test case. Usually you&#39;ll mock data for one or more of the Terraform imports; some policies might also require additional imports. For more details about mocking Terraform imports, see:</p>

<ul>
<li><a href="/docs/enterprise/sentinel/import/mock-tfplan.html">Mocking <code>tfplan</code> data</a>
</li>
<li><a href="/docs/enterprise/sentinel/import/mock-tfconfig.html">Mocking <code>tfconfig</code> data</a>
</li>
<li><a href="/docs/enterprise/sentinel/import/mock-tfstate.html">Mocking <code>tfstate</code> data</a>
</li>
</ul>
</li>
<li><p><a name="test" /><a href="#test"><code>test</code></a> — Expected results for the policy&#39;s rules in this test case. (If the only expected result is <code>&quot;main&quot;: true</code>, you can omit the <code>test</code> key.)</p>
</li>
</ul>
<p>For each policy, make at least two tests: one that obeys the policy, and one that violates the policy (using <code>&quot;test&quot;: {&quot;main&quot;: false}</code> so that the failed policy results in a passing test). Add more test cases for more complex policies.</p>
</li>
<li><p>Run <code>sentinel test</code> (in the root of the policy repo) to see results for all of your tests.</p>
</li>
</ul>
<p>An example Sentinel test:</p>
<div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"test"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"main"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"instance_type_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"mock"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tfplan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"aws_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"always-bad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"0"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"applied"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"ami"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ami-0afae182eed9d2b46"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"instance_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t3.2xlarge"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HelloWorld"</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id="continuous-integration">
  <a name="continuous-integration" class="anchor" href="#continuous-integration">&raquo;</a>
  Continuous Integration
</h2>
<p>Once you have working Sentinel tests, use your preferred continuous integration (CI) system to automatically run those tests on pull requests to your policy repo.</p>
<div class="alert alert-info" role="alert">
<p><strong>Example:</strong> The example policy repo uses <a href="https://developer.github.com/actions/">GitHub Actions</a> to run <code>sentinel test</code> for every PR. You can view <a href="https://github.com/hashicorp/tfe-policies-example/blob/master/.github/main.workflow">the repo&#39;s Actions workflow</a>, as well as the code for the <a href="https://github.com/hashicorp/sentinel-github-actions/tree/master/test">example Sentinel test action</a>.</p>
</div>


    </div>
  </div>
</div>


    <div id="footer" class="navigation hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <ul class="footer-links nav navbar-nav">
              <li><a href="/intro/index.html">Intro</a></li>
              <li><a href="/docs/index.html">Docs</a></li>
              <li><a href="/docs/extend/index.html">Extend</a></li>
              <li><a href="https://www.hashicorp.com/privacy">Privacy</a></li>
              <li><a href="/security.html">Security</a></li>
              <li><a href="/assets/files/press-kit.zip">Press Kit</a></li>
            </ul>
            <ul class="footer-links nav navbar-nav navbar-right">
              <li><a href="https://github.com/hashicorp/terraform-website">Edit this page</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Product",
        "name": "Terraform",
        "alternateName": "Terraform by HashiCorp",
        "manufacturer": "HashiCorp",
        "url": "https://www.terraform.io",
        "logo": "/../../../assets/images/logo-hashicorp-3f10732f.svg",
        "sameAs": [
          "https://github.com/hashicorp/terraform"
        ]
      }
    </script>
  </body>
</html>
