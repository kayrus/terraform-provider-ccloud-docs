<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Recommendations for deprecations, removals, and renames.">

    <link rel="apple-touch-icon" sizes="180x180" href="../../../assets/images/favicons/apple-touch-icon-13180a24.png">
    <link rel="icon" type="image/png" href="../../../assets/images/favicons/favicon-32x32-62171ffd.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../assets/images/favicons/favicon-16x16-2821bcc8.png" sizes="16x16">
    <link rel="manifest" href="/android-manifest.json">
    <link rel="mask-icon" href="../../../assets/images/favicons/safari-pinned-tab-bab846e1.svg" color="#5C4EE5">
    <meta name="msapplication-config" content="/microsoft-tile.xml" />
    <meta name="theme-color" content="#ffffff">
    
      <meta name="twitter:card" content="summary" />
      <meta property="og:image" content="/../../../assets/images/og-image-8b3e4f7d.png"/>
      <meta property="og:image:width" content="100"/>
      <meta property="og:image:height" content="100"/>
    <meta name="twitter:site" content="@HashiCorp" />
    <meta name="twitter:creator" content="@HashiCorp" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/docs/extend/best-practices/deprecations.html" />
    <meta property="og:title" content="Extending Terraform: Deprecations, Removals, and Renames Best Practices - Terraform by HashiCorp" />
    <meta property="og:site_name" content="Terraform by HashiCorp"/>
    <meta property="og:description" content="Recommendations for deprecations, removals, and renames." />

    <title>Extending Terraform: Deprecations, Removals, and Renames Best Practices - Terraform by HashiCorp</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://use.typekit.net/wxf7mfi.css">
    <link href="../../../assets/stylesheets/application-06344df3.css" rel="stylesheet" />

    <!-- Site scripts -->
    <!--[if lt IE 9]><script src="../../../assets/javascripts/ie-compat-c141a02d.js" defer="defer"></script><![endif]-->
    <script src="../../../assets/javascripts/application-e080fe63.js" defer="defer"></script>

    <!-- Analytics scrpts -->
    <script defer>
      !function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),e.push(a),e}};for(var t=0;t<e.methods.length;t++){var a=e.methods[t];e[a]=e.factory(a)}e.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},e.SNIPPET_VERSION="4.0.0",e.load("")}}();var om597a24292a958,om597a24292a958_poll=function(){var e=0;return function(t,a){clearInterval(e),e=setInterval(t,a)}}();!function(e,t,a){if(e.getElementById(a))om597a24292a958_poll(function(){if(window.om_loaded&&!om597a24292a958)return(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0})},25);else{var n=!1,o=e.createElement("script");o.id=a,o.src="//a.optnmstr.com/app/js/api.min.js",o.async=!0,o.onload=o.onreadystatechange=function(){if(!(n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState))try{n=om_loaded=!0,(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0}),o.onload=o.onreadystatechange=null}catch(e){}},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(o)}}(document,0,"omapi-script");
    </script>

    
  </head>

  <body id="page-docs-extend-best-practices-deprecations" class="layout-extend page-extending-terraform-deprecations-removals-and-renames-best-practices">

    <svg class="hidden-print" aria-hidden="true" style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <symbol id="mega-nav-icon-angle" viewBox="0 0 13 7">
      <polygon points="6.5,6.5 0.7,1.6 1.3,0.8 6.5,5.2 11.7,0.8 12.3,1.6 "/>
    </symbol>
    <symbol id="mega-nav-icon-close" viewBox="0 0 13 15">
      <path vector-effect="non-scaling-stroke" d="M1.1 14L11.9 1M11.9 14L1.1 1"/>
    </symbol>
  </defs>
</svg>
<div class="hidden-print mega-nav-sandbox">
  <div class="mega-nav-banner">
    <div class="container">
      <div class="mega-nav-banner-item">
        <a class="mega-nav-banner-logo" href="https://www.hashicorp.com"><img src="../../../assets/images/mega-nav/logo-hashicorp-wordmark-bbed0e8a.svg" alt="HashiCorp Logo" /></a>
      </div>
      <div class="mega-nav-banner-item">
        <p class="mega-nav-tagline"><span class="visible-xs text-muted">Learn the</span><span class="hidden-xs text-muted">Learn how Terraform fits into the</span></p>
        <div id="#mega-nav" class="mega-nav">
          <button type="button" id="mega-nav-ctrl" class="mega-nav-ctrl">
            <div class="mega-nav-ctrl-items">
              <img src="../../../assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" />
              <strong>HashiCorp Suite</strong>
              <span class="mega-nav-icon-outline">
                <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg><span class="visuallyhidden">Open</span>
              </span>
            </div>
          </button>
          <div id="mega-nav-body-ct" class="mega-nav-body-ct" aria-labelledby="mega-nav-ctrl">
            <div class="mega-nav-body">
              <button type="button" id="mega-nav-close" class="mega-nav-close"><svg class="mega-nav-icon mega-nav-icon-close" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-close"></use></svg><span class="visuallyhidden">Close</span></button>
              <div class="mega-nav-body-header">
                <div class="mega-nav-body-header-item">
                  <h2 class="mega-nav-h1">Provision, Secure, Connect, and&nbsp;Run</h2>
                  <p class="mega-nav-h2">Any infrastructure for any&nbsp;application</p>
                </div>
                <div class="mega-nav-body-header-item">
                  <a href="https://www.hashicorp.com/" class="mega-nav-btn"><img src="../../../assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" /> Learn the HashiCorp Enterprise&nbsp;Suite <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg></a>
                </div>
              </div>
              <div class="mega-nav-body-grid">
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Provision</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vagrantup.com" class="mega-nav-grid-item mega-nav-grid-item-vagrant">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-vagrant-a7ab5898.svg" alt="Vagrant Logo" />
                        </div>
                        <b>Vagrant</b>
                        <ul>
                          <li><span class="mega-nav-tag">Build</span></li>
                          <li><span class="mega-nav-tag">Test</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.packer.io" class="mega-nav-grid-item mega-nav-grid-item-packer">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-packer-cb3b9b94.svg" alt="Packer Logo" />
                        </div>
                        <b>Packer</b>
                        <ul>
                          <li><span class="mega-nav-tag">Package</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.terraform.io" class="mega-nav-grid-item mega-nav-grid-item-terraform">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-terraform-ff69eaae.svg" alt="Terraform Logo" />
                        </div>
                        <b>Terraform</b>
                        <ul>
                          <li><span class="mega-nav-tag">Provision</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Secure</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vaultproject.io" class="mega-nav-grid-item mega-nav-grid-item-vault">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-vault-0f83e3d2.svg" alt="Vault Logo" />
                        </div>
                        <b>Vault</b>
                        <ul>
                          <li><span class="mega-nav-tag">Secure</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Connect</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.consul.io" class="mega-nav-grid-item mega-nav-grid-item-consul">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-consul-c77f6844.svg" alt="Consul Logo" />
                        </div>
                        <b>Consul</b>
                        <ul>
                          <li><span class="mega-nav-tag">Connect</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Run</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.nomadproject.io" class="mega-nav-grid-item mega-nav-grid-item-nomad">
                        <div class="mega-nav-grid-item-img">
                          <img src="../../../assets/images/mega-nav/logo-nomad-c4c148be.svg" alt="Nomad Logo" />
                        </div>
                        <b>Nomad</b>
                        <ul>
                          <li><span class="mega-nav-tag">Run</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="mega-nav-body-footer">
                <p>Seven elements of the modern Application Lifecycle</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


    <div id="header" class="navigation navbar-static-top hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <div class="navbar-header">
              <div class="navbar-brand">
                <a href="/">
                  <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="50">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

                </a>
              </div>
              <button class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="buttons hidden-xs">
              <nav class="navigation-links" role="navigation">
                <ul class="main-links nav navbar-nav navbar-right">
                  <li><a href="/intro/index.html">Intro</a></li>
                  <li><a href="https://learn.hashicorp.com/terraform/">Learn</a></li>
                  <li><a href="/docs/index.html">Docs</a></li>
                  <li><a href="/guides/index.html">Guides</a></li>
                  <li><a href="/docs/extend/index.html">Extend</a></li>
                  <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
                  <li>
                    <a href="/downloads.html">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
                    </a>
                  </li>
                  <li>
                    <a href="https://github.com/hashicorp/terraform">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sidebar-overlay"></div>

<aside class="sidebar" role="navigation">
  <div class="sidebar-header">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="42">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

  </div>

  <ul class="nav sidebar-nav">
    <li><a href="/intro/index.html">Intro</a></li>
    <li><a href="https://learn.hashicorp.com/terraform/">Learn</a></li>
    <li><a href="/docs/index.html">Docs</a></li>
    <li><a href="/guides/index.html">Guides</a></li>
    <li><a href="/docs/extend/index.html">Extend</a></li>
    <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
  </ul>

  <div class="divider"></div>

  <ul class="external nav sidebar-nav">
    <li>
      <a href="/downloads.html">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
      </a>
    </li>
    <li>
      <a href="https://github.com/hashicorp/terraform">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
      </a>
    </li>
  </ul>
</aside>


    <div class="container">
  <div class="row">
    <div id="docs-sidebar" class="col-sm-4 col-md-3 col-xs-12 hidden-print" role="complementary">
          <h4><a href="/docs/extend/index.html">Extending Terraform</a></h4>

    <ul class="nav docs-sidenav">
      <li>
        <a href="/docs/extend/how-terraform-works.html">How Terraform Works</a>
      </li>
      <li>
        <a href="/docs/extend/plugin-types.html">Plugin Types</a>
      </li>
      <li>
        <!-- possibly make this "Guides" and collect some? -->
        <a href="/docs/extend/writing-custom-providers.html">Writing Custom Providers</a>
      </li>

      <li>
        <a href="/docs/extend/schemas/index.html">Schemas</a>
        <ul class="nav">
          <li>
            <a href="/docs/extend/schemas/schema-types.html">Schema Types</a>
          </li>
          <li>
            <a href="/docs/extend/schemas/schema-behaviors.html">Schema Behaviors</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/docs/extend/resources.html">Resources</a>
      </li>
      <li class="active">
        <a href="/docs/extend/best-practices/index.html">Best Practices</a>
        <ul class="nav">
          <li>
            <a href="/docs/extend/best-practices/naming.html">Naming</a>
          </li>

          <li class="active">
            <a href="/docs/extend/best-practices/deprecations.html">Deprecations, Removals, and Renames</a>
          </li>

          <li>
            <a href="/docs/extend/best-practices/detecting-drift.html">Detecting Drift</a>
          </li>

          <li>
            <a href="/docs/extend/best-practices/testing.html">Testing Patterns</a>
          </li>

          <li>
            <a href="/docs/extend/best-practices/versioning.html">Versioning and Changelog</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/docs/extend/testing/index.html">Testing</a>
        <ul class="nav">
          <li>
            <a href="/docs/extend/testing/acceptance-tests/index.html">Acceptance Tests</a>
              <ul class="nav">
                <li>
                  <a href="/docs/extend/testing/acceptance-tests/testcase.html">Test Cases</a>
                </li>
                <li>
                  <a href="/docs/extend/testing/acceptance-tests/teststep.html">Test Steps</a>
                </li>
                <li>
                  <a href="/docs/extend/testing/acceptance-tests/sweepers.html">Sweepers</a>
                </li>
              </ul>
          </li>
          <li>
            <a href="/docs/extend/testing/unit-testing.html">Unit Testing</a>
          </li>
          <!--
          <li>
            <a href="/docs/extend/testing/testing-patterns.html">Resource Test Patterns</a>
          </li>
          -->
        </ul>
      </li>

      <li>
        <a href="/docs/extend/community/index.html">Community</a>
        <ul class="nav">
          <li>
            <a href="/docs/extend/community/contributing.html">Contributing</a>
          </li>
          <li>
            <a href="/docs/extend/community/code-of-conduct.html">Code of Conduct</a>
          </li>
          <li>
            <a href="/docs/extend/community/events/index.html">Events</a>
            <ul class="nav">
              <li>
                <a href="/docs/extend/community/events/2018/fall-gardening.html">Gardening - Fall 2018</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/docs/extend/community/maintainers.html">Maintainers</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/guides/terraform-provider-development-program.html">Terraform Provider Development Program</a>
      </li>

      <hr>

      <li>
        <a class="back" href="/docs/internals/index.html">Terraform Internals</a>
      </li>
    </ul>

        <h4>Other Docs</h4>

    <ul class="nav docs-sidenav">
      <li>
        <a class="back" href="/docs/cli-index.html">Terraform CLI</a>
      </li>
      <li>
        <a class="back" href="/docs/enterprise/index.html">Terraform Enterprise</a>
      </li>
      <li>
        <a class="back" href="/docs/providers/index.html">Provider References</a>
      </li>
      <li>
        <a class="back" href="/docs/glossary.html">Terraform Glossary</a>
      </li>
      <li>
        <a class="back" href="/intro/index.html">Introduction to Terraform</a>
      </li>
      <li>
        <a class="back" href="/guides/index.html">Guides and Whitepapers</a>
      </li>
      <li>
        <a class="back" href="/docs/registry/index.html">Terraform Registry</a>
      </li>
      <li>
        <a class="back" href="/docs/github-actions/index.html">Terraform GitHub Actions</a>
      </li>
    </ul>


    </div>

    <div id="inner" class="col-sm-8 col-md-9 col-xs-12" role="main">
      
  <h1 id="deprecations-removals-and-renames">
  <a name="deprecations-removals-and-renames" class="anchor" href="#deprecations-removals-and-renames">&raquo;</a>
  Deprecations, Removals, and Renames
</h1>
<p>Terraform is trusted for managing many facets of infrastructure across many organizations. Part of that trust is due to consistent versioning guidelines and setting expectations for various levels of upgrades. Ensuring backwards compatibility for all patch and minor releases, potentially in concert with any upcoming major changes, is recommended and supported by the Terraform development framework. This allows operators to iteratively update their Terraform configurations rather than require massive refactoring.</p>
<p>This guide is designed to walk through various scenarios where existing Terraform functionality requires future removal, while maintaining backwards compatibility. Further information about the versioning terminology (e.g. <code>MAJOR</code>.<code>MINOR</code>.<code>PATCH</code>) in this guide can be found in <a href="/docs/extend/best-practices/versioning.html">the versioning guidelines documentation</a>.</p>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> Removals should only ever occur in <code>MAJOR</code> version upgrades.</p>
</div>
<h2 id="table-of-contents">
  <a name="table-of-contents" class="anchor" href="#table-of-contents">&raquo;</a>
  Table of Contents
</h2>

<ul>
<li><a href="#provider-attribute-removal">Provider Attribute Removal</a>
</li>
<li><a href="#provider-attribute-rename">Provider Attribute Rename</a>

<ul>
<li><a href="#renaming-a-required-attribute">Renaming a Required Attribute</a>
</li>
<li><a href="#renaming-an-optional-attribute">Renaming an Optional Attribute</a>
</li>
<li><a href="#renaming-a-computed-attribute">Renaming a Computed Attribute</a>
</li>
</ul>
</li>
<li><a href="#provider-data-source-or-resource-removal">Provider Data Source or Resource Removal</a>
</li>
<li><a href="#provider-data-source-or-resource-rename">Provider Data Source or Resource Rename</a>
</li>
</ul>
<h2 id="provider-attribute-removal">
  <a name="provider-attribute-removal" class="anchor" href="#provider-attribute-removal">&raquo;</a>
  Provider Attribute Removal
</h2>
<p>The recommended process for removing an attribute from a data source or resource in a provider is as follows:</p>

<ol>
<li>Add <code>Deprecated</code> in the attribute schema definition. After an operator upgrades to this version, they will be shown a warning with the message provided when using the attribute, but the Terraform run will still complete.
</li>
<li>Ensure the changelog has an entry noting the deprecation.
</li>
<li>Release a <code>MINOR</code> version with the deprecation.
</li>
<li>In the next <code>MAJOR</code> version, remove all code associated with the attribute except for its schema definition.
</li>
<li>Replace <code>Deprecated</code> with <code>Removed</code> in the attribute schema definition. Add <code>Computed: true</code> if not present. Ensure all <code>ConflictsWith</code>, <code>DiffSuppressFunc</code>, <code>ForceNew</code>, and <code>Set</code> are removed. After an operator upgrades to this version, they will be shown an error with the message provided when using the attribute and their plans should show no updates related to removing this attribute.
</li>
<li>Ensure the changelog has an entry noting the removal.
</li>
<li>Release the <code>MAJOR</code> version.
</li>
<li>In the next <code>MAJOR</code> version afterwards, completely remove the attribute schema definition. No changelog is necessary.
</li>
</ol>
<h2 id="provider-attribute-rename">
  <a name="provider-attribute-rename" class="anchor" href="#provider-attribute-rename">&raquo;</a>
  Provider Attribute Rename
</h2>
<p>When renaming an attribute from one name to another, it is important to keep backwards compatibility with both existing Terraform configurations and the <a href="/docs/state/index.html">Terraform state</a> while operators migrate. To accomplish this, there will be some duplicated logic to support both attributes until the next <code>MAJOR</code> release. Once both attributes are appropriately handled, the process for deprecating and removing the old attribute is the same as noted in the <a href="#provider-attribute-removal">Provider Attribute Removal section</a>.</p>
<p>The procedure for renaming an attribute depends on what type of attribute it is:</p>

<ul>
<li><a href="#renaming-a-required-attribute">Renaming a Required Attribute</a>
</li>
<li><a href="#renaming-an-optional-attribute">Renaming an Optional Attribute</a>
</li>
<li><a href="#renaming-a-computed-attribute">Renaming a Computed Attribute</a>
</li>
</ul>
<h3 id="renaming-a-required-attribute">
  <a name="renaming-a-required-attribute" class="anchor" href="#renaming-a-required-attribute">&raquo;</a>
  Renaming a Required Attribute
</h3>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> If the schema definition does not contain <code>Optional</code> or <code>Required</code>, see the <a href="#renaming-a-computed-attribute">Renaming a Computed Attribute section</a> instead. If the schema definition contains <code>Optional</code> instead of <code>Required</code>, see the <a href="#renaming-an-optional-attribute">Renaming an Optional Attribute section</a>.</p>
</div>
<div class="alert alert-info" role="alert">
<p><a href="/docs/extend/schemas/schema-behaviors.html#required">Required attributes</a> are also referred to as required &quot;arguments&quot; throughout the Terraform documentation.</p>
</div>
<p>In general, the procedure here does two things:</p>

<ul>
<li>Prevents the operator from needing to define two attributes with the same value.
</li>
<li>Allows the operator to migrate the configuration to the new attribute at the same time requiring that any other references only work with the new attribute. This is to prevent a situation with Terraform showing a difference when the existing attribute is configured, but the new attribute is saved into the Terraform state. For example, in <code>terraform plan</code> output format:
</li>
</ul>
<div class="highlight"><pre class="highlight plaintext"><code>existing_attribute: "" =&gt; "value"
new_attribute:      "value" =&gt; ""
</code></pre></div><p>The recommended process is as follows:</p>

<ol>
<li>Replace <code>Required: true</code> with <code>Optional: true</code> in the existing attribute schema definition.
</li>
<li>Replace <code>Required</code> with <code>Optional</code> in the existing attribute documentation.
</li>
<li>Duplicate the schema definition of the existing attribute, renaming one of them with the new attribute name.
</li>
<li>Duplicate the documentation of the existing attribute, renaming one of them with the new attribute name.
</li>
<li>Add <code>Deprecated</code> to the schema definition of the existing (now the &quot;old&quot;) attribute, noting to use the new attribute in the message.
</li>
<li>Add <code>**Deprecated**</code> to the documentation of the existing (now the &quot;old&quot;) attribute, noting to use the new attribute.
</li>
<li>Add a note to the documentation that either the existing (now the &quot;old&quot;) attribute or new attribute must be configured.
</li>
<li>Add <code>ConflictsWith</code> to the schema definitions of both the old and new attributes so they will present an error to the operator if both are configured at the same time.
</li>
<li>Add conditional logic in the <code>Create</code>, <code>Read</code>, and <code>Update</code> functions of the data source or resource to handle both attributes. Generally, this involves using <a href="https://godoc.org/github.com/hashicorp/terraform/helper/schema#ResourceData.GetOk"><code>ResourceData.GetOk()</code></a> (commonly <code>d.GetOk()</code> in HashiCorp maintained providers).
</li>
<li>Add conditional logic in the <code>Create</code> and <code>Update</code> function that returns an error if both the old and new attributes are not defined.
</li>
<li>Follow the rest of the procedures in the <a href="#provider-attribute-removal">Provider Attribute Removal section</a>. When the old attribute is removed, update the schema definition and documentation of the new attribute back to <code>Required</code>.
</li>
</ol>
<h4 id="example-renaming-of-a-required-attribute">
  <a name="example-renaming-of-a-required-attribute" class="anchor" href="#example-renaming-of-a-required-attribute">&raquo;</a>
  Example Renaming of a Required Attribute
</h4>
<p>Given this sample resource:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Create</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">,</span><span class="x">
        </span><span class="n">Read</span><span class="o">:</span><span class="x">   </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">
        </span><span class="n">Update</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"existing_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">     </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Required</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">existingAttribute</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="x">
    </span><span class="c">// add attribute to provider create API call</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">existingAttribute</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="x">
    </span><span class="c">// add attribute to provider update API call</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>In order to support renaming <code>existing_attribute</code> to <code>new_attribute</code>, this sample can be written as the following to support both attributes simultaneously until the <code>existing_attribute</code> is removed:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Create</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">,</span><span class="x">
        </span><span class="n">Read</span><span class="o">:</span><span class="x">   </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">
        </span><span class="n">Update</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"existing_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">          </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Optional</span><span class="o">:</span><span class="x">      </span><span class="no">true</span><span class="p">,</span><span class="x">
                </span><span class="n">ConflictsWith</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"new_attribute"</span><span class="p">},</span><span class="x">
                </span><span class="n">Deprecated</span><span class="o">:</span><span class="x">    </span><span class="s">"use new_attribute instead"</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
            </span><span class="s">"new_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">          </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Optional</span><span class="o">:</span><span class="x">      </span><span class="no">true</span><span class="p">,</span><span class="x">
                </span><span class="n">ConflictsWith</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"existing_attribute"</span><span class="p">},</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">existingAttribute</span><span class="p">,</span><span class="x"> </span><span class="n">existingAttributeOk</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">)</span><span class="x">
    </span><span class="n">newAttribute</span><span class="p">,</span><span class="x"> </span><span class="n">newAttributeOk</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">)</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="o">!</span><span class="n">existingAttributeOk</span><span class="x"> </span><span class="o">&amp;&amp;</span><span class="x"> </span><span class="o">!</span><span class="n">newAttributeOk</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="k">return</span><span class="x"> </span><span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"one of existing_attribute or new_attribute must be configured"</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">existingAttributeOk</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add existingAttribute to provider create API call</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add newAttribute to provider create API call</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">existingAttribute</span><span class="p">,</span><span class="x"> </span><span class="n">existingAttributeOk</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">)</span><span class="x">
    </span><span class="n">newAttribute</span><span class="p">,</span><span class="x"> </span><span class="n">newAttributeOk</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">)</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="o">!</span><span class="n">existingAttributeOk</span><span class="x"> </span><span class="o">&amp;&amp;</span><span class="x"> </span><span class="o">!</span><span class="n">newAttributeOk</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="k">return</span><span class="x"> </span><span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"one of existing_attribute or new_attribute must be configured"</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">existingAttributeOk</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add existingAttribute to provider update API call</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add newAttribute to provider update API call</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>When the <code>existing_attribute</code> is ready for removal, then this can be written as:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Create</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">,</span><span class="x">
        </span><span class="n">Read</span><span class="o">:</span><span class="x">   </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">
        </span><span class="n">Update</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"new_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">     </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Required</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">newAttribute</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="x">
    </span><span class="c">// add attribute to provider create API call</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">newAttribute</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="x">
    </span><span class="c">// add attribute to provider update API call</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><h3 id="renaming-an-optional-attribute">
  <a name="renaming-an-optional-attribute" class="anchor" href="#renaming-an-optional-attribute">&raquo;</a>
  Renaming an Optional Attribute
</h3>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> If the schema definition does not contain <code>Optional</code> or <code>Required</code>, see the <a href="#renaming-a-computed-attribute">Renaming a Computed Attribute section</a> instead. If the schema definition contains <code>Required</code> instead of <code>Optional</code>, see the <a href="#renaming-a-required-attribute">Renaming a Required Attribute section</a>.</p>
</div>
<div class="alert alert-info" role="alert">
<p><a href="/docs/extend/schemas/schema-behaviors.html#optional">Optional attributes</a> are also referred to as optional &quot;arguments&quot; throughout the Terraform documentation.</p>
</div>
<p>In general, the procedure here allows the operator to migrate the configuration to the new attribute at the same time requiring that any other references only work with the new attribute. This is to prevent a situation with Terraform showing a difference when the existing attribute is configured, but the new attribute is saved into the Terraform state. For example, in <code>terraform plan</code> output format:</p>
<div class="highlight"><pre class="highlight plaintext"><code>existing_attribute: "" =&gt; "value"
new_attribute:      "value" =&gt; ""
</code></pre></div><p>The recommended process is as follows:</p>

<ol>
<li>Duplicate the schema definition of the existing attribute, renaming one of them with the new attribute name.
</li>
<li>Duplicate the documentation of the existing attribute, renaming one of them with the new attribute name.
</li>
<li>Add <code>Deprecated</code> to the schema definition of the existing (now the &quot;old&quot;) attribute, noting to use the new attribute in the message.
</li>
<li>Add <code>**Deprecated**</code> to the documentation of the existing (now the &quot;old&quot;) attribute, noting to use the new attribute.
</li>
<li>Add <code>ConflictsWith</code> to the schema definitions of both the old and new attributes so they will present an error to the operator if both are configured at the same time.
</li>
<li>Add conditional logic in the <code>Create</code>, <code>Read</code>, and <code>Update</code> functions of the data source or resource to handle both attributes. Generally, this involves using <a href="https://godoc.org/github.com/hashicorp/terraform/helper/schema#ResourceData.GetOk"><code>ResourceData.GetOk()</code></a> (commonly <code>d.GetOk()</code> in HashiCorp maintained providers).
</li>
<li>Follow the rest of the procedures in the <a href="#provider-attribute-removal">Provider Attribute Removal section</a>.
</li>
</ol>
<h4 id="example-renaming-of-an-optional-attribute">
  <a name="example-renaming-of-an-optional-attribute" class="anchor" href="#example-renaming-of-an-optional-attribute">&raquo;</a>
  Example Renaming of an Optional Attribute
</h4>
<p>Given this sample resource:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Create</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">,</span><span class="x">
        </span><span class="n">Read</span><span class="o">:</span><span class="x">   </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">
        </span><span class="n">Update</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"existing_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">     </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Optional</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add attribute to provider create API call</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add attribute to provider update API call</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>In order to support renaming <code>existing_attribute</code> to <code>new_attribute</code>, this sample can be written as the following to support both attributes simultaneously until the <code>existing_attribute</code> is removed:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Create</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">,</span><span class="x">
        </span><span class="n">Read</span><span class="o">:</span><span class="x">   </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">
        </span><span class="n">Update</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"existing_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">          </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Optional</span><span class="o">:</span><span class="x">      </span><span class="no">true</span><span class="p">,</span><span class="x">
                </span><span class="n">ConflictsWith</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"new_attribute"</span><span class="p">},</span><span class="x">
                </span><span class="n">Deprecated</span><span class="o">:</span><span class="x">    </span><span class="s">"use new_attribute instead"</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
            </span><span class="s">"new_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">          </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Optional</span><span class="o">:</span><span class="x">      </span><span class="no">true</span><span class="p">,</span><span class="x">
                </span><span class="n">ConflictsWith</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"existing_attribute"</span><span class="p">},</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add attribute to provider create API call</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add attribute to provider create API call</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add attribute to provider update API call</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add attribute to provider update API call</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>When the <code>existing_attribute</code> is ready for removal, then this can be written as:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Create</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">,</span><span class="x">
        </span><span class="n">Read</span><span class="o">:</span><span class="x">   </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">
        </span><span class="n">Update</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"new_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">     </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Optional</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetCreate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add attribute to provider create API call</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetUpdate</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">GetOk</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">);</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// add attribute to provider update API call</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><h3 id="renaming-a-computed-attribute">
  <a name="renaming-a-computed-attribute" class="anchor" href="#renaming-a-computed-attribute">&raquo;</a>
  Renaming a Computed Attribute
</h3>
<div class="alert alert-warning" role="alert">
<p><strong>NOTE:</strong> If the schema definition contains <code>Optional</code> see the <a href="#renaming-an-optional-attribute">Renaming an Optional Attribute section</a> instead. If the schema definition contains <code>Required</code> see the <a href="#renaming-a-required-attribute">Renaming a Required Attribute section</a> instead.</p>
</div>
<p>The recommended process is as follows:</p>

<ol>
<li>Duplicate the schema definition of the existing attribute, renaming one of them with the new attribute name.
</li>
<li>Duplicate the documentation of the existing attribute, renaming one of them with the new attribute name.
</li>
<li>Add <code>Deprecated</code> to the schema definition of the existing (now the &quot;old&quot;) attribute, noting to use the new attribute in the message.
</li>
<li>Add <code>**Deprecated**</code> to the documentation of the existing (now the &quot;old&quot;) attribute, noting to use the new attribute.
</li>
<li>Set both attributes in the Terraform state in the <code>Read</code> functions of the data source or resource.
</li>
<li>Follow the rest of the procedures in the <a href="#provider-attribute-removal">Provider Attribute Removal section</a>.
</li>
</ol>
<h4 id="example-renaming-of-a-computed-attribute">
  <a name="example-renaming-of-a-computed-attribute" class="anchor" href="#example-renaming-of-a-computed-attribute">&raquo;</a>
  Example Renaming of a Computed Attribute
</h4>
<p>Given this sample resource:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Read</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"existing_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">     </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Computed</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>In order to support renaming <code>existing_attribute</code> to <code>new_attribute</code>, this sample can be written as the following to support both attributes simultaneously until the <code>existing_attribute</code> is removed:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Read</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"existing_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">       </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Computed</span><span class="o">:</span><span class="x">   </span><span class="no">true</span><span class="p">,</span><span class="x">
                </span><span class="n">Deprecated</span><span class="o">:</span><span class="x"> </span><span class="s">"use new_attribute instead"</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
            </span><span class="s">"new_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">     </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Computed</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"existing_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">
    </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>When the <code>existing_attribute</code> is ready for removal, then this can be written as:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Read</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">,</span><span class="x">

        </span><span class="n">Schema</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Schema</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other attributes ...</span><span class="x">

            </span><span class="s">"new_attribute"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
                </span><span class="n">Type</span><span class="o">:</span><span class="x">     </span><span class="n">schema</span><span class="o">.</span><span class="n">TypeString</span><span class="p">,</span><span class="x">
                </span><span class="n">Computed</span><span class="o">:</span><span class="x"> </span><span class="no">true</span><span class="p">,</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidgetRead</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ... other logic ...</span><span class="x">

    </span><span class="n">d</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"new_attribute"</span><span class="p">,</span><span class="x"> </span><span class="c">/* ... */</span><span class="p">)</span><span class="x">

    </span><span class="c">// ... other logic ...</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><h2 id="provider-data-source-or-resource-removal">
  <a name="provider-data-source-or-resource-removal" class="anchor" href="#provider-data-source-or-resource-removal">&raquo;</a>
  Provider Data Source or Resource Removal
</h2>
<p>The recommended process for removing a data source or resource from a provider is as follows:</p>

<ol>
<li>Add <code>DeprecationMessage</code> in the data source or resource schema definition. After an operator upgrades to this version, they will be shown a warning with the message provided when using the deprecated data source or resource, but the Terraform run will still complete.
</li>
<li>Ensure the changelog has an entry noting the deprecation.
</li>
<li>Release a <code>MINOR</code> version with the deprecation.
</li>
<li>In the next <code>MAJOR</code> version, remove all code associated with the deprecated data source or resource except for the schema and replace the <code>Create</code> and <code>Read</code> functions to always return an error. Remove the documentation sidebar link and update the resource or data source documentation page to include information about the removal and any potential migration infromation. After an operator upgrades to this version, they will be shown an error about the missing data source or resource.
</li>
<li>Ensure the changelog has an entry noting the removal.
</li>
<li>Release the <code>MAJOR</code> version.
</li>
<li>In the next <code>MAJOR</code> version, remove all code associated with the removed data source or resource. Remove the resource or data source documentation page.
</li>
<li>Release the <code>MAJOR</code> version.
</li>
</ol>
<h3 id="example-resource-removal">
  <a name="example-resource-removal" class="anchor" href="#example-resource-removal">&raquo;</a>
  Example Resource Removal
</h3>
<p>Given this sample provider and resource:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">Provider</span><span class="p">()</span><span class="x"> </span><span class="n">terraform</span><span class="o">.</span><span class="n">ResourceProvider</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Provider</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">ResourcesMap</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other resources ...</span><span class="x">
            </span><span class="s">"example_widget"</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">(),</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>In order to deprecate <code>example_widget</code>, this sample can be written as:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">Provider</span><span class="p">()</span><span class="x"> </span><span class="n">terraform</span><span class="o">.</span><span class="n">ResourceProvider</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Provider</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">ResourcesMap</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other resources ...</span><span class="x">
            </span><span class="s">"example_widget"</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">(),</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">DeprecationMessage</span><span class="o">:</span><span class="x"> </span><span class="s">"use example_thing resource instead"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>To soft remove <code>example_widget</code> with a friendly error message, this sample can be written as:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">Provider</span><span class="p">()</span><span class="x"> </span><span class="n">terraform</span><span class="o">.</span><span class="n">ResourceProvider</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Provider</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">ResourcesMap</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other resources ...</span><span class="x">
            </span><span class="s">"example_widget"</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">(),</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Create</span><span class="o">:</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"use example_thing resource instead"</span><span class="p">)</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="n">Read</span><span class="o">:</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"use example_thing resource instead"</span><span class="p">)</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>To remove <code>example_widget</code>:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">Provider</span><span class="p">()</span><span class="x"> </span><span class="n">terraform</span><span class="o">.</span><span class="n">ResourceProvider</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Provider</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">ResourcesMap</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other resources ...</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><h2 id="provider-data-source-or-resource-rename">
  <a name="provider-data-source-or-resource-rename" class="anchor" href="#provider-data-source-or-resource-rename">&raquo;</a>
  Provider Data Source or Resource Rename
</h2>
<p>When renaming a resource from one name to another, it is important to keep backwards compatibility with both existing Terraform configurations and the Terraform state while operators migrate. To accomplish this, there will be some duplicated logic to support both resources until the next <code>MAJOR</code> release. Once both resources are appropriately handled, the process for deprecating and removing the old resource is the same as noted in the <a href="#provider-data-source-or-resource-removal">Provider Data Source or Resource Removal section</a>.</p>
<p>The recommended process is as follows:</p>

<ol>
<li>Duplicate the code of the existing resource, renaming (and potentially modifying) functions as necessary.
</li>
<li>Duplicate the documentation of the existing resource, renaming (and potentially modifying) as necessary.
</li>
<li>Add <code>DeprecatedMessage</code> to the schema definition of the existing (now the &quot;old&quot;) resource, noting to use the new resource in the message.
</li>
<li>Add <code>!&gt; **WARNING:** This resource is deprecated and will be removed in the next major version</code> to the documentation of the existing (now the &quot;old&quot;) resource, noting to use the new resource.
</li>
<li>Add the new resource to the provider <code>ResourcesMap</code>
</li>
<li>Follow the rest of the procedures in the <a href="#provider-attribute-removal">Provider Attribute Removal section</a>.
</li>
</ol>
<h3 id="example-resource-renaming">
  <a name="example-resource-renaming" class="anchor" href="#example-resource-renaming">&raquo;</a>
  Example Resource Renaming
</h3>
<p>Given this sample provider and resource:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">Provider</span><span class="p">()</span><span class="x"> </span><span class="n">terraform</span><span class="o">.</span><span class="n">ResourceProvider</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Provider</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">ResourcesMap</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other resources ...</span><span class="x">

            </span><span class="s">"example_existing_widget"</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleExistingWidget</span><span class="p">(),</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleExistingWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>In order to support renaming <code>example_existing_widget</code> to <code>example_new_widget</code>, this sample can be written as the following to support both attributes simultaneously until the <code>existing_attribute</code> is removed:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">Provider</span><span class="p">()</span><span class="x"> </span><span class="n">terraform</span><span class="o">.</span><span class="n">ResourceProvider</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Provider</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">ResourcesMap</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other resources ...</span><span class="x">

            </span><span class="s">"example_existing_widget"</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleExistingWidget</span><span class="p">(),</span><span class="x">
            </span><span class="s">"example_new_widget"</span><span class="o">:</span><span class="x">      </span><span class="n">resourceExampleNewWidget</span><span class="p">(),</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleExistingWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">DeprecationMessage</span><span class="o">:</span><span class="x"> </span><span class="s">"use example_new_widget resource instead"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleNewWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>To soft remove <code>example_existing_widget</code> with a friendly error message:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">Provider</span><span class="p">()</span><span class="x"> </span><span class="n">terraform</span><span class="o">.</span><span class="n">ResourceProvider</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Provider</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">ResourcesMap</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other resources ...</span><span class="x">

            </span><span class="s">"example_existing_widget"</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleExistingWidget</span><span class="p">(),</span><span class="x">
            </span><span class="s">"example_new_widget"</span><span class="o">:</span><span class="x">      </span><span class="n">resourceExampleNewWidget</span><span class="p">(),</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleExistingWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">Create</span><span class="o">:</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"use example_new_widget resource instead"</span><span class="p">)</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="n">Read</span><span class="o">:</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">d</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceData</span><span class="p">,</span><span class="x"> </span><span class="n">meta</span><span class="x"> </span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"use example_new_widget resource instead"</span><span class="p">)</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleNewWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>To remove <code>example_existing_widget</code>:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">Provider</span><span class="p">()</span><span class="x"> </span><span class="n">terraform</span><span class="o">.</span><span class="n">ResourceProvider</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Provider</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">

        </span><span class="n">ResourcesMap</span><span class="o">:</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
            </span><span class="c">// ... other resources ...</span><span class="x">

            </span><span class="s">"example_new_widget"</span><span class="o">:</span><span class="x"> </span><span class="n">resourceExampleNewWidget</span><span class="p">(),</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">resourceExampleNewWidget</span><span class="p">()</span><span class="x"> </span><span class="o">*</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="o">.</span><span class="n">Resource</span><span class="p">{</span><span class="x">
        </span><span class="c">// ... other configuration ...</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div>

    </div>
  </div>
</div>


    <div id="footer" class="navigation hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <ul class="footer-links nav navbar-nav">
              <li><a href="/intro/index.html">Intro</a></li>
              <li><a href="/docs/index.html">Docs</a></li>
              <li><a href="/docs/extend/index.html">Extend</a></li>
              <li><a href="https://www.hashicorp.com/privacy">Privacy</a></li>
              <li><a href="/security.html">Security</a></li>
              <li><a href="/assets/files/press-kit.zip">Press Kit</a></li>
            </ul>
            <ul class="footer-links nav navbar-nav navbar-right">
              <li><a href="https://github.com/hashicorp/terraform-website">Edit this page</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Product",
        "name": "Terraform",
        "alternateName": "Terraform by HashiCorp",
        "manufacturer": "HashiCorp",
        "url": "https://www.terraform.io",
        "logo": "/../../../assets/images/logo-hashicorp-3f10732f.svg",
        "sameAs": [
          "https://github.com/hashicorp/terraform"
        ]
      }
    </script>
  </body>
</html>
